# AutoGen 框架配置檔案範例
# 複製此檔案為 conf_autogen.yaml 並根據需要調整設定
# 生產環境配置
# environment: production
# debug: false

# =====================================
# 📋 重要配置說明
# =====================================
# 🎯 動態模板系統 (Template-Only Mode)：
#    - 所有智能體的 system_message 都從動態模板載入
#    - 不再使用配置文件中的靜態 system_message
#    - 模板載入失敗將直接拋出異常，系統停止運行
#    - 確保以下模板文件存在且可用：
#      * coordinator.md
#      * planner.md
#      * researcher.md
#      * coder.md
#      * reporter.md
#      * background_investigator.md
#      * human_feedbacker.md
#
# 🤖 研究團隊 (Research Team)：
#    - 這是虛擬智能體，不需要在此配置
#    - 由 AgentSelector 內部邏輯處理協調
#
# ⚙️ selector_config 參數：
#    - max_plan_iterations: 最大計劃迭代次數
#    - max_step_num: 計劃中的最大步驟數
#    - auto_accepted_plan: 是否自動接受計劃
#    - enable_background_investigation: 是否啟用背景調查
# =====================================

# AutoGen 基本設定
autogen:
  # 預設 LLM 配置
  default_llm_config:
    temperature: 0.0
    max_tokens: 100_000
    timeout: 30

  # 智能體基本設定
  agent_defaults:
    human_input_mode: "NEVER"
    code_execution_config: false

  # 群組對話設定已移除，AutoGen SelectorGroupChat 不使用這些設定

# 智能體角色配置
agents:
  coordinator_v3:
    name: "CoordinatorAgentV3"
    role: "coordinator"
    llm_config_override:
      temperature: 0.3

  planner_v3:
    name: "PlannerAgentV3"
    role: "planner"
    llm_config_override:
      temperature: 0.4

  researcher_v3:
    name: "ResearcherAgentV3"
    role: "researcher"
    tools:
      - "web_search"
      - "crawl_website"
      # - "local_search"
    llm_config_override:
      temperature: 0.2

  coder_v3:
    name: "CoderAgentV3"
    role: "coder"
    tools:
      - "python_repl"
    code_execution_config:
      work_dir: "temp_code_v3"
      use_docker: false
      timeout: 60

  reporter_v3:
    name: "ReporterAgentV3"
    role: "reporter"

  background_investigator_v3:
    name: "BackgroundInvestigatorAgentV3"
    role: "background_investigator"
    tools:
      - "web_search"
      - "crawl_website"
    llm_config_override:
      temperature: 0.3

  human_feedbacker_v3:
    name: "HumanFeedbackerAgentV3"
    role: "human_feedbacker"

# AgentSelector 配置 - 只保留實際使用的參數
selector_config:
  max_plan_iterations: 1
  max_step_num: 3
  max_search_results: 3
  auto_accepted_plan: true
  enable_background_investigation: false

# 工具配置
tools:
  web_search:
    provider: "tavily" # tavily, brave_search, duckduckgo, arxiv, grounding_bing
    # max_results 已移除，使用 param 中的 "Max search results" 設定

  code_execution:
    timeout: 60
    max_execution_time: 300
    allowed_modules:
      - "pandas"
      - "numpy"
      - "matplotlib"
      - "requests"

# 模型配置
BASIC_MODEL:
  model: $AZURE_DEPLOYMENT_NAME_4_1_MINI
  azure_deployment: $AZURE_DEPLOYMENT_NAME_4_1_MINI
  azure_endpoint: $AZURE_OPENAI_ENDPOINT
  api_version: $BASIC_MODEL__API_VERSION
  api_key: $BASIC_MODEL__API_KEY
  verify_ssl: false
  model_type: "azure"

REASONING_MODEL:
  model: $AZURE_DEPLOYMENT_NAME_4_1
  azure_deployment: $AZURE_DEPLOYMENT_NAME_4_1
  azure_endpoint: $AZURE_OPENAI_ENDPOINT
  api_version: $BASIC_MODEL__API_VERSION
  api_key: $REASONING_MODEL__API_KEY
  verify_ssl: false
  model_type: "azure"

# Use Azure Open AI with key (from AutoGen example)
# provider: autogen_ext.models.openai.AzureOpenAIChatCompletionClient
# config:
#   model: $AZURE_DEPLOYMENT_NAME_4_1_MINI
#   azure_endpoint: $AZURE_OPENAI_ENDPOINT
#   azure_deployment: $AZURE_DEPLOYMENT_NAME_4_1_MINI
#   api_version: $BASIC_MODEL__API_VERSION
#   api_key: $BASIC_MODEL__API_KEY

# 記錄設定
LOGGING:
  # 提供者選項：file, sqlite://path/to/db.sqlite, postgresql://user:pass@host:port/dbname
  provider: "file"

  # 日誌級別設定
  level: "INFO"

  # 輸出設定
  console_output: true

  # 檔案設定
  file_settings:
    log_dir: "logs"
    max_days: 10
    compress_old_files: true

  # 外部套件日誌設定
  external_loggers:
    level: "ERROR"

  # 日誌格式設定
  format:
    main: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    thread: "%(asctime)s - %(levelname)s - %(message)s"
